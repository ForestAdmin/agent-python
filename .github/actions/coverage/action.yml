name: Coverage
description: ""
inputs:
  python-version:
    required: true
    description: "The python-version used to define the python"
  current_package:
    required: true
    description: "The package to coverage"
  CC_TEST_REPORTER_ID:
    required: true
    description: "Code climate reporter id"
runs:
  using: "composite"
  steps:
    - uses: actions/checkout@v3
    - name: Set up Python ${{ inputs.python-version }}
      uses: actions/setup-python@v2
      with:
        python-version: ${{ inputs.python-version }}
    - name: Install dependencies
      shell: bash
      run: |
        python -m pip install --upgrade pip
        pip install coverage
    - name: Download all coverage reports
      uses: actions/download-artifact@v2
    - name: Combine reports
      shell: bash
      run: |
        coverage combine ./code-coverage-report.*/.coverage
#    - name: Send coverage
#      shell: bash
#      working-directory: ${{ inputs.current_package }}
#      uses: paambaati/codeclimate-action@v2.7.4
#      with:
#        coverageCommand: coverage xml
#      env:
#        CC_TEST_REPORTER_ID: ${{ inputs.CC_TEST_REPORTER_ID }}